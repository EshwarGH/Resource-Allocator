
import streamlit as st
import pandas as pd
import gspread

st.title("ðŸ“Š Google Sheet Viewer & Updater")

# Connect to Google Sheets
gc = gspread.service_account(filename=".streamlit/service_account.json")
spreadsheet_id = "1U2zpmiviZajGTyEfmKIu0jM2YeaTkOmFDLnysmcaT7A"  
sh = gc.open_by_key(spreadsheet_id)
worksheet = sh.sheet1

# Function to read data
def get_data():
    data = worksheet.get_all_records()
    return pd.DataFrame(data)

# Display current data
st.subheader("Current Data")
df = get_data()
st.dataframe(df)

st.subheader("Add a New User")
# Input fields
name = st.text_input("Name")
pet = st.text_input("Pet")

# Add button
if st.button("Add User"):
    if name and pet:
        # Append new row to Google Sheet
        worksheet.append_row([name, pet])
        st.success(f"Added {name} with pet {pet}!")

        # Refresh and show updated data
        df = get_data()
        st.dataframe(df)
    else:
        st.error("Please enter both Name and Pet.")

